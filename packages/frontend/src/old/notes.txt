actions:
  Zoom(value)
  Pan(x, y)
  Select(id, multi)
  StartDeselecting(id)
  Deselect(id)
  DeselectAll()
  StartDragging(x, y)
  StopDragging()
  StopSelecting()
  LockDragDirections()
  UnlockDragDirections()
  Drag(x, y)

on wheel:
  if crtl or cmd:
    Zoom(y)
  else:
    if shift and not macos
      Pan(y, x)
    else
      Pan(x, y)

on mouse left down:
  if !shift
    DeselectAll()
  if over element:
    if shift and selected
      StartDeselecting(id)
    else:
      Select(id)

on mouse left drag:
  StopDeselecting()
  if space and not dragging
    Pan(x, y)
  else
    Drag(x, y)

on mouse left up:
  if deselecting:
    Deselect(id)
    StopDeselecting()
  StopDragging()

on shift down
  LockDragDirections()

on shift up
  UnlockDragDirections()

on mouse middle drag
  if !dragging
    Pan(x, y)
